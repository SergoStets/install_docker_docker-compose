Как установить Docker на Ubuntu 22.04

Установка Docker на Ubuntu 22.04 сводится к перечню команд в терминале. Ниже размещена пошаговая инструкция с пояснениями к выполняемым действиям. Алгоритм также подойдет и для серверных версий Ubuntu.

1. Обновляем индексы пакетов apt

К сожалению, в стандартном репозитории не всегда размещены новейшие релизы ПО. Поэтому в этой инструкции мы будем загружать Docker из его официального репозитория, чтобы установить именно последний релиз. В первую очередь, нам нужно обновить индексы пакетов:

  
    

  
  
sudo apt update

2. Устанавливаем дополнительные пакеты

Для установки докера потребуется дополнительно загрузить 4 пакета, а именно:

curl — необходим для работы с веб-ресурсами;
software-properties-common — пакет для управления ПО с помощью скриптов;
ca-certificates — содержит информацию о центрах сертификации;
apt-transport-https — необходим для передачи данных по протоколу HTTPS.
Скачаем их:

  
    

  
  
sudo apt install curl software-properties-common ca-certificates apt-transport-https -y

Флаг -y означает, что на все вопросы терминала ответом будет «Да».

3. Импортируем GPG-ключ

GPG-ключ нужен для верификации подписей ПО. Он понадобится для добавления репозитория докера в локальный список. Импортируем GPG-ключ:

  
    

  
  
wget -O- https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor | sudo tee /etc/apt/keyrings/docker.gpg > /dev/null

Во время импорта терминал может вывести предупреждение, после чего сообщит об успешном выполнении команды.

4. Добавляем репозиторий докера

Добавим репозиторий для нашей версии Ubuntu, которая называется «Jammy». Для других версий ОС нужно использовать их кодовые имена, которые были перечислены в разделе «Системные требования». Выполняем команду:

  
    

  
  
echo "deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu jammy stable"| sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

Во время выполнения терминал попросит подтвердить выполнение операции. Нажимаем Enter.

5. В очередной раз обновляем индексы пакетов

После проведения всех манипуляций нам необходимо еще раз обновить индексы пакетов с помощью уже знакомой команды:

  
    

  
  
sudo apt update

6. Проверяем репозиторий

Убедимся, что инсталляция будет осуществлена из нужного нам репозитория. Выполняем следующую команду:

  
    

  
  
apt-cache policy docker-ce

Вывод:

Image3

В зависимости от выхода новых версий Docker вывод может иметь другой вид. Главное убедиться, что установка будет осуществляться из репозитория докера. 

7. Устанавливаем докер

После осуществление всех манипуляций с репозиториями можно перейти непосредственно к установке:

  
    

  
  
sudo apt install docker-ce -y

После выполнения команды начнется установка Докера.

Убедимся в успешности установки, проверив статус в системе:

  
    

  
  
sudo systemctl status docker

Вывод:

Image1

Как видим, всё в порядке: служба Docker имеет статус Active(Running).

Ubuntu 22.04 — Установка Docker Compose

Docker Compose — это инструмент Докера, предназначенный для управления большим количеством контейнеров. Он используется в проектах, в которых используется много контейнеров, которые должны работать вместе как единое целое. Вручную управлять этим процессом затруднительно. Весь процесс управления описывается в рамках одного YAML-файла: он содержит настройки и конфигурацию всех контейнеров и приложений в них. 

Есть несколько способов установить Docker Compose. Мы рассмотрим два из них: установку из репозитория ОС, а также способ установить последнюю версию вручную.

Установка с помощью apt-get

Если для вас установка именно последней версии не является принципиальным моментом, то установка можно осуществить из репозитория Ubuntu. Для этого выполняем следующую команду:

  
    

  
  
sudo apt-get install docker-compose

Ручная установка 

Переходим в репозиторий на GitHub и находим номер версии новейшего релиза (Latest).

На момент обновления статьи Latest-версия Docker Compose для установки на Ubuntu 22.04 — v2.38.2. Загрузим её:

  
    

  
  
sudo curl -L "https://github.com/docker/compose/releases/download/v2.38.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose

В команде с помощью параметров $(uname-s) и $(uname -m) автоматически учитываются характеристики системы и её архитектура. После окончания загрузки изменим права доступа скачанного файла:

  
    

  
  
sudo chmod +x /usr/local/bin/docker-compose# docker-docker-compose
